# 视频同步与时区功能教程

本项目核心功能是模拟『25时、Nightcord见。』成员们的 24 小时工作日常。为了实现沉浸式体验，视频播放会根据当前时间自动同步到对应的画面。

## 1. 视频分段机制

整个 24 小时被分为三个部分（Part），每个部分时长 8 小时：

*   **Part 1 (P1)**: 25:00 - 09:00 (即凌晨 01:00 - 09:00)
*   **Part 2 (P2)**: 09:00 - 17:00
*   **Part 3 (P3)**: 17:00 - 25:00 (即 17:00 - 次日 01:00)

系统会根据当前时间自动判断应该播放哪一个视频文件 (`p1.mp4`, `p2.mp4`, 或 `p3.mp4`)，并跳转到精确的秒数。

## 2. 时区模式 (Timezone Mode)

为了满足不同用户的需求，提供了两种时区模式：

### 本地时间 (Local Time)
*   **默认模式**。
*   视频进度将与您**所在的本地时间**完全同步。
*   例如：如果您在下午 14:00 打开网页，视频将自动播放 P2 部分（09:00-17:00），并跳转到第 5 个小时的位置。
*   **适用场景**：希望角色陪伴您度过当下的工作/学习时间。

### 东京时间 (Tokyo Time)
*   视频进度将与**日本东京时间 (UTC+9)** 同步。
*   **适用场景**：希望与角色处于同一时空，体验她们当下的生活状态（例如您在欧洲的白天，想看她们深夜工作的样子）。

## 3. 如何切换时区

1.  在页面右上角的控制栏中找到 **"Toggle TZ"** 按钮。
2.  点击该按钮即可在 "Local" 和 "Tokyo" 之间切换。
3.  切换后：
    *   左上角的时间显示会更新为对应时区的时间。
    *   视频会自动重新同步，可能会跳转到不同的片段或进度。
    *   系统会自动保存您的选择，下次访问时保持该设置。

## 4. 自动同步机制

*   **初始化同步**：网页加载时，会自动计算时间并加载正确的视频片段。
*   **定期校准**：系统每 5 秒钟会检查一次视频进度与实际时间的偏差。如果偏差超过 30 秒（例如由于网络卡顿或暂停），系统会自动跳转到正确的时间点。
*   **跨段自动切换**：当时间从一个 Part 跨越到下一个 Part（例如从 08:59:59 到 09:00:00），系统会自动加载下一个视频文件并无缝播放。

## 5. 常见问题

*   **为什么视频突然跳转？**
    这通常是自动校准机制在工作。如果您手动暂停了视频，恢复播放后系统检测到进度落后于当前时间，就会自动跳转到“现在”应该播放的位置。
*   **画面是黑的？**
    请检查检查网络连接是否正常加载了视频。或者检查您的浏览器是否支持 HEVC。
    
    > 本项目使用高画质的 **H.265 (HEVC)** 编码视频以节省带宽并提供更好的画质。
    > *   **兼容性检测**：页面加载时会自动检测您的浏览器是否支持 HEVC。
    > *   **警告提示**：如果检测到不支持，左下角会弹出提示框 *"检测到您的浏览器可能不支持 H.265 / HEVC 编码..."*。
    > *   **解决方案**：
    >     *   参见 [StaZhu/enable-chromium-hevc-hardware-decoding](https://github.com/StaZhu/enable-chromium-hevc-hardware-decoding) 了解如何启用 HEVC 硬件解码。
    >     *   对于使用 Microsoft Edge 的用户，可以从微软商店安装免费的 **[HEVC 视频扩展](https://apps.microsoft.com/detail/9nmzlz57r3t7)** 以在支持的设备上启用 HEVC 支持。
    >     *   部分旧版浏览器或未安装解码器的系统可能无法播放画面（只有声音）。
    >
    > （节选自：[基础控制与界面](./TUTORIAL_BASIC_CONTROLS.md)）
